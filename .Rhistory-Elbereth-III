##
plots <- plots0[[10]]
plots$Age_weeks
plots$`Age_weeks`
View(plots)
plots$Age_weeks[2]
plots$Age_weeks[3]
names(plots)
duplicated(names(plots))
library(MBOcc)
## Generate parameter plots
plots0 <- MBplot(bag0, return=T, odds=T)
## Combine into single plot list for ease
test <- recombine(plots0, predplot0, append, T)
View(test)
names(predplot0[[1]])
names(predplot0[[1]][1])
names(predplot0[[1]][[1]])
## Combine into single plot list for ease
test <- recombine(plots0, predplot0, append, T)
View(test)
library(MBOcc)
## Combine into single plot list for ease
plots0 <- recombine(plots0, predplot0, append, T)
## Save to file because you probably don't want to do this again
save(plots0, newdata, file="../output/poultry_metaanalysis_vignette_plots.RD")
##
plots <- plots0[[10]]
##
plots <- plots0[[2]]
##
plots <- plots0[[6]]
names(plots0)
plots <- plots0[[7]]
##
plots <- plots0[[10]]
gridExtra::grid.arrange(
plots$MLE +
theme(strip.text.y.right = element_text(angle=-90, hjust=0.5),
axis.text.x=element_blank(), text=element_text(size=8)),
plots$Age_weeks$Site + labs(title=NULL) +
geom_point(size=3) +
theme(legend.position = "bottom", text=element_text(size=8)),
plots$Age_weeks$Age_weeks + labs(title=NULL) + facet_grid(Sites~.),
plots$Age_weeks$State + labs(title=NULL, subtitle = NULL) +
theme(legend.key.size = unit(4,"mm"), text=element_text(size=8),
legend.position = "bottom", legend.justification = "right",
legend.key.spacing = unit(0,"mm")) +
facet_grid(L1~., scales="free_x"),
nrow=1, layout_matrix=matrix(c(1,3,4,2,3,4), nrow=2, ncol=3, byrow=T))
##
plots <- plots0[[2]]
gridExtra::grid.arrange(
plots$MLE + facet_wrap(vars(beta)) +
theme(axis.text.x=element_blank(), text=element_text(size=8)),
plots$Age_weeks$Site + labs(title=NULL) +
geom_point(aes(shape=Rearing), size=3) + facet_grid(L1~., scales="free_x") +
theme(legend.position = "bottom", text=element_text(size=8)),
plots$Age_weeks$Age_weeks + labs(title=NULL) + facet_grid(Rearing~Sites),
plots$Age_weeks$State + labs(title=NULL, subtitle = NULL) +
theme(legend.key.size = unit(4,"mm"), text=element_text(size=8),
legend.position = "bottom", legend.justification = "right",
legend.key.spacing = unit(0,"mm")) +
facet_grid(Rearing~L1, scales="free_x"),
nrow=1, layout_matrix=matrix(c(1,3,4,2,3,4), nrow=2, ncol=3, byrow=T))
egg::ggarrange(plots$Rearing$Site + facet_grid(variable~L1) +
theme(axis.text.x=element_text(angle=75, hjust=1, vjust=1),
text=element_text(size=10)),
plots$Rearing$State + labs(title=NULL, subtitle=NULL) +
facet_grid(L1~Age_weeks, space = "free_x", scales="free_x") +
theme(axis.text.x=element_text(angle=75, hjust=1, vjust=1),
text=element_text(size=10)),
nrow=1, widths=c(1,4))
##
plots <- plots0[[6]]
gridExtra::grid.arrange(
plots$MLE +
theme(axis.text.x=element_blank(), text=element_text(size=8),
strip.text.y.right = element_text(angle=-90, hjust=0.5)),
plots$Age_weeks$Site + labs(title=NULL) +
geom_point(aes(shape=Rearing), size=3) + facet_grid(L1~site, scales="free_x") +
theme(legend.position = "bottom", text=element_text(size=8)),
plots$Age_weeks$Age_weeks + labs(title=NULL) + facet_grid(Rearing~Sites),
plots$Age_weeks$State + labs(title=NULL, subtitle = NULL) +
theme(legend.key.size = unit(4,"mm"), text=element_text(size=8),
legend.position = "bottom", legend.justification = "right",
legend.key.spacing = unit(0,"mm")) +
facet_grid(Rearing~L1, scales="free_x"),
nrow=1, layout_matrix=matrix(c(1,3,4,2,3,4), nrow=2, ncol=3, byrow=T))
egg::ggarrange(plots$Rearing$Site + facet_grid(variable~L1) +
theme(axis.text.x=element_text(angle=75, hjust=1, vjust=1),
text=element_text(size=10)),
plots$Rearing$State + labs(title=NULL, subtitle=NULL) +
facet_grid(L1~Age_weeks, space = "free_x", scales="free_x") +
theme(axis.text.x=element_text(angle=75, hjust=1, vjust=1),
text=element_text(size=10)),
nrow=1, widths=c(1,3))
plots <- plots0[[7]]
gridExtra::grid.arrange(
plots$MLE +
theme(strip.text.y.right = element_text(angle=-90, hjust=0.5),
axis.text.x=element_blank(), text=element_text(size=8)),
plots$Age_weeks$Site + labs(title=NULL) +
geom_point(aes(shape=Species), size=3) + facet_grid(.~site, scales="free_x") +
theme(legend.position = "bottom", text=element_text(size=8)),
plots$Age_weeks$Age_weeks + labs(title=NULL) + facet_grid(Species~Sites),
plots$Age_weeks$State + labs(title=NULL, subtitle = NULL) +
theme(legend.key.size = unit(4,"mm"), text=element_text(size=8),
legend.position = "bottom", legend.justification = "right",
legend.key.spacing = unit(0,"mm")) +
facet_grid(Species~L1, scales="free_x"),
nrow=1, layout_matrix=matrix(c(1,3,4,2,3,4), nrow=2, ncol=3, byrow=T))
egg::ggarrange(plots$Species$Site + facet_grid(variable~L1) +
theme(axis.text.x=element_text(angle=75, hjust=1, vjust=1),
text=element_text(size=10)),
plots$Species$Site + labs(title=NULL, subtitle=NULL) +
facet_grid(L1~Age_weeks, space = "free_x", scales="free_x") +
theme(axis.text.x=element_text(angle=75, hjust=1, vjust=1),
text=element_text(size=10)),
nrow=1, widths=c(1,3))
egg::ggarrange(plots0$`1.1.2.3 Rearing`$MLE +
theme(strip.text.y.right = element_text(angle=-90, hjust=0.5),
text=element_text(size=10)),
plots0$`1.1.2.3 Rearing`$Rearing$Site + labs(title=NULL) + facet_grid(variable~L1) +
theme(axis.text.x=element_text(angle=75, hjust=1, vjust=1),
text=element_text(size=10)),
plots0$`1.1.2.3 Rearing`$Rearing$State + labs(title=NULL, subtitle=NULL) +
theme(axis.text.x=element_text(angle=75, hjust=1, vjust=1),
text=element_text(size=10)),
nrow=1, widths=c(3,2,1))
egg::ggarrange(plots0$`1.2.3.4 Rearing`$MLE +
theme(strip.text.y.right = element_text(angle=-90, hjust=0.5),
text=element_text(size=10)),
plots0$`1.2.3.4 Rearing`$Rearing$Site + labs(title=NULL) + facet_grid(variable~L1) +
theme(axis.text.x=element_text(angle=75, hjust=1, vjust=1),
text=element_text(size=10)),
plots0$`1.2.3.4 Rearing`$Rearing$State + labs(title=NULL, subtitle=NULL) +
theme(axis.text.x=element_text(angle=75, hjust=1, vjust=1),
text=element_text(size=10)),
nrow=1, widths=c(3,2,1))
gridExtra::grid.arrange(plots0$`1.1.1.1 Flock`$MLE +
facet_wrap(vars(beta),nrow=1) +
theme(text=element_text(size=10),
axis.text.x=element_text(angle=30)),
plots0$`1.1.1.1 Flock`$Flock$Site +
labs(title=NULL) + facet_grid(variable~L1) +
theme(axis.text.x=element_text(angle=75, hjust=1, vjust=1),
text=element_text(size=10)),
plots0$`1.1.1.1 Flock`$Flock$State +
labs(title=NULL, subtitle=NULL) +
theme(axis.text.x=element_text(angle=75, hjust=1, vjust=1),
text=element_text(size=10)),
layout_matrix=matrix(c(1,1,2,3,2,3), nrow=3, ncol=2, byrow=T))
gridExtra::grid.arrange(plots0$`1.1.2.2 Flock`$MLE +
theme(strip.text.y.right = element_text(angle=-90, hjust=0.5),
text=element_text(size=10)),
plots0$`1.1.2.2 Flock`$Flock$Site +
facet_grid(.~L1) + labs(title=NULL, subtitle=NULL) +
theme(axis.text.x=element_blank(), axis.title.x = element_blank(),
text=element_text(size=10),
legend.key.size = unit(4,"mm"),
legend.key.spacing = unit(1,"mm"),
legend.text.position = "bottom",
legend.text=element_text(size=6),
legend.title.position = "bottom",
legend.title = element_text(hjust=0.5),
legend.position = "bottom") +
guides(fill=guide_legend(nrow=1)),
plots0$`1.1.2.2 Flock`$Flock$State +
labs(title=NULL) + facet_grid(variable~L1) +
theme(text=element_text(size=10),
axis.text.x = element_text(angle=75, hjust=1, vjust=1)),
layout_matrix=matrix(c(1,1,2,2,2,1,1,3,3,3), nrow=2, ncol=5, byrow=T))
gridExtra::grid.arrange(plots0$`1.1.2.2 Flock`$MLE +
theme(strip.text.y.right = element_text(angle=-90, hjust=0.5),
text=element_text(size=10)),
plots0$`1.1.2.2 Flock`$Flock$Site +
facet_grid(.~L1) + labs(title=NULL, subtitle=NULL) +
theme(axis.text.x=element_blank(), axis.title.x = element_blank(),
text=element_text(size=10),
legend.key.size = unit(4,"mm"),
legend.key.spacing = unit(1,"mm"),
legend.text.position = "bottom",
legend.text=element_text(size=6),
legend.title.position = "bottom",
legend.title = element_text(hjust=0.5),
legend.position = "bottom") +
guides(fill=guide_legend(nrow=1)),
plots0$`1.1.2.2 Flock`$Flock$State +
labs(title=NULL) + facet_grid(.~L1) +
theme(text=element_text(size=10),
axis.text.x = element_text(angle=75, hjust=1, vjust=1)),
layout_matrix=matrix(c(1,1,2,2,2,1,1,3,3,3), nrow=2, ncol=5, byrow=T))
gridExtra::grid.arrange(plots0$`1.1.2.2 Flock`$MLE +
theme(strip.text.y.right = element_text(angle=-90, hjust=0.5),
text=element_text(size=10)),
plots0$`1.1.2.2 Flock`$Flock$State +
facet_grid(.~L1) + labs(title=NULL, subtitle=NULL) +
theme(axis.text.x=element_blank(), axis.title.x = element_blank(),
text=element_text(size=10),
legend.key.size = unit(4,"mm"),
legend.key.spacing = unit(1,"mm"),
legend.text.position = "bottom",
legend.text=element_text(size=6),
legend.title.position = "bottom",
legend.title = element_text(hjust=0.5),
legend.position = "bottom") +
guides(fill=guide_legend(nrow=1)),
plots0$`1.1.2.2 Flock`$Flock$Site +
labs(title=NULL) + facet_grid(.~L1) +
theme(text=element_text(size=10),
axis.text.x = element_text(angle=75, hjust=1, vjust=1)),
layout_matrix=matrix(c(1,1,2,2,2,1,1,3,3,3), nrow=2, ncol=5, byrow=T))
egg::ggarrange(plots0$`1.1.1.1 ~1`$MLE +
theme(strip.text.y.right = element_text(angle=-90, hjust=0.5),
text=element_text(size=10)),
plots0$`1.1.1.1 ~1`$Site +
labs(title=NULL) + facet_wrap(vars(L1)) +
theme(axis.text.x=element_text(angle=75, hjust=1, vjust=1),
text=element_text(size=10)),
plots0$`1.1.1.1 ~1`$State +
labs(title=NULL, subtitle=NULL) +
theme(text=element_text(size=10)),
nrow=1, widths=c(1,3,1))
egg::ggarrange(plots0$`1.1.2.2 ~1`$MLE +
theme(strip.text.y.right = element_text(angle=-90, hjust=0.5),
text=element_text(size=10)),
plots0$`1.1.2.2 ~1`$Site +
labs(title=NULL) + facet_wrap(vars(L1)) +
theme(axis.text.x=element_text(angle=75, hjust=1, vjust=1),
text=element_text(size=10)),
plots0$`1.1.2.2 ~1`$State +
labs(title=NULL, subtitle=NULL) +
theme(text=element_text(size=10)),
nrow=1, widths=c(2,3,1))
egg::ggarrange(plots0$`1.2.3.4 ~1`$MLE +
theme(strip.text.y.right = element_text(angle=-90, hjust=0.5),
text=element_text(size=10)),
plots0$`1.2.3.4 ~1`$Site +
labs(title=NULL) +
theme(axis.text.x=element_text(angle=75, hjust=1, vjust=1),
text=element_text(size=10)),
plots0$`1.2.3.4 ~1`$State +
labs(title=NULL, subtitle=NULL) +
theme(text=element_text(size=10)),
nrow=1, widths=c(3,4,1))
rm(list=setdiff(ls(), c("commset","meta","taxa")))
## Load quietly
load("../output/poultry_metaanalysis_vignette1.RD")
## Generate parameter plots
plotsM <- MBplot(bagM, return=T, odds=T)
## Create `newdata` for each taxon in a list format
newdata <- split(bagM$P.site, bagM$P.site$L1) %>%
lapply(., function(x){ #use age and flock as factors, since those are the ones we used here
unique(x[,2:5]) %>%
lapply(., as.character) %>%
lapply(., as.factor) %>%
as.data.frame() %>%
.[rep(row.names(.), times=50), ] %>%
group_by(Flock) %>%
mutate(Age_weeks=row_number())
})
## Generate prediction and prediction plots
predM <- MBpredict(mbM, newdata, each = T, method="boot")
## Generate prediction and prediction plots
predM <- MBpredict(mbM, newdata, each = T, method="boot")
predplotM <- MBpredplot(predM, "Age_weeks", "Flock", T)
test <- recombine(plotsM, predplotM, append, T)
test$`1.1.1.1 1+Age_weeks*Experiment`$Age_weeks$Age_weeks
plotsM <- recombine(plotsM, predplotM, append, T)
## Save to file because you probably don't want to do this again
save(plotsM, predM, newdata, file="../output/poultry_metaanalysis_vignette1_plots.RD")
names(plotsM)
##
plots <- plotsM[[11]]
##
plots <- plotsM[[11]]
gridExtra::grid.arrange(
plots$MLE +
theme(strip.text.y.right = element_text(angle=-90, hjust=0.5),
axis.text.x=element_blank(), text=element_text(size=8)),
plots$Age_weeks$Site +
labs(title=NULL) + geom_point(size=3) +
theme(legend.position = "bottom", text=element_text(size=8)),
plots$Age_weeks$Age_weeks +
labs(title=NULL) + facet_grid(Sites~.),
plots$Age_weeks$State +
labs(title=NULL, subtitle = NULL) +
theme(legend.key.size = unit(4,"mm"), text=element_text(size=8),
legend.position = "bottom", legend.justification = "right",
legend.key.spacing = unit(0,"mm")) +
facet_grid(L1~., scales="free_x"),
nrow=1, layout_matrix=matrix(c(1,3,4,2,3,4), nrow=2, ncol=3, byrow=T))
##
plots <- plotsM[[1]]
##
plots <- plotsM[[8]]
rm(list=setdiff(ls(), c("commset","meta","taxa")))
## Load quietly
load("../output/poultry_metaanalysis_vignette2.RD")
## Load quietly
load("../output/poultry_metaanalysis_vignette2_plots.RD")
## Generate parameter plots
plotsF <- MBplot(bagF, return=T, odds=T)
plotsF <- recombine(plotsF, predplotF, append, recursive=T)
## Save to file because you probably don't want to do this again
save(plotsF, predF, newdata, file="../output/poultry_metaanalysis_vignette2_plots.RD")
View(plotsF)
View(predplotF)
## Generate parameter plots
plotsF <- MBplot(bagF, return=T, odds=T)
## Create `newdata` for each taxon in a list format
newdata <- split(bagF$P.site, bagF$P.site$L1) %>%
lapply(., function(x){ #use age and flock as factors, since those are the ones we used here
unique(x[,2:3]) %>%
lapply(., as.character) %>%
lapply(., as.factor) %>%
as.data.frame() %>%
.[rep(row.names(.), times=50), ] %>%
group_by(Species, Rearing) %>%
mutate(TmT1=row_number())
})
## Generate prediction and prediction plots
predF <- MBpredict(mbF, newdata, each = T, method="boot")
predplotF <- MBpredplot(predF, "TmT1", c("Species","Rearing"), T)
plotsF <- recombine(plotsF, predplotF, append, recursive=T)
## Save to file because you probably don't want to do this again
save(plotsF, predF, newdata, file="../output/poultry_metaanalysis_vignette2_plots.RD")
plotsF[[4]]
##
plots <- plotsF[[4]]
gridExtra::grid.arrange(plotsF$`1.1.1.1 Rearing`$MLE +
theme(strip.text.y.right = element_text(angle=-90, hjust=0.5),
text=element_text(size=10)),
plotsF$`1.1.1.1 Rearing`$Rearing$Site +
facet_grid(.~L1) + labs(title=NULL, subtitle=NULL) +
theme(axis.text.x=element_blank(), axis.title.x = element_blank(),
text=element_text(size=10)) +
guides(fill="none"),
plotsF$`1.1.1.1 Rearing`$Rearing$State +
labs(title=NULL) + facet_grid(.~L1) +
theme(legend.justification = "top",
text=element_text(size=10),
axis.text.x = element_text(angle=75, hjust=1, vjust=1)),
cowplot::get_legend(plotsF$`1.1.1.1 Rearing`$Rearing$State),
layout_matrix=matrix(c(1,1,2,2,2,4,1,1,3,3,3,4), nrow=2, ncol=6, byrow=T))
egg::ggarrange(plotsF$`1.1.2.2 Rearing`$MLE +
theme(strip.text.y.right = element_text(angle=-90, hjust=0.5),
text=element_text(size=10)),
plotsF$`1.1.2.2 Rearing`$Rearing$State +
labs(title=NULL) + facet_grid(variable~L1) +
theme(axis.text.x=element_text(angle=75, hjust=1, vjust=1),
text=element_text(size=10)),
plotsF$`1.1.2.2 Rearing`$Rearing$State +
labs(title=NULL, subtitle=NULL) +
theme(axis.text.x=element_text(angle=75, hjust=1, vjust=1),
text=element_text(size=10)),
nrow=1, widths=c(2,2,1))
##
plots <- plotsF[[2]]
gridExtra::grid.arrange(
plots$MLE +
facet_wrap(vars(beta)) +
theme(axis.text.x=element_blank(), text=element_text(size=8)),
plots$TmT1$Site +
labs(title=NULL) + facet_grid(L1~., scales="free_x") +
geom_point(aes(shape=Rearing), size=3) +
theme(legend.position = "bottom", text=element_text(size=8)),
plots$TmT1$TmT1 +
labs(title=NULL) + facet_grid(Rearing~Sites),
plots$TmT1$State +
labs(title=NULL, subtitle = NULL) +
theme(legend.key.size = unit(4,"mm"), text=element_text(size=8),
legend.position = "bottom", legend.justification = "right",
legend.key.spacing = unit(0,"mm")) +
facet_grid(Rearing~L1, scales="free_x"),
nrow=1, layout_matrix=matrix(c(1,3,4,2,3,4), nrow=2, ncol=3, byrow=T))
egg::ggarrange(plots$Rearing$Site +
facet_grid(variable~L1) +
theme(axis.text.x=element_text(angle=75, hjust=1, vjust=1),
text=element_text(size=10)),
plots$Rearing$State +
labs(title=NULL, subtitle=NULL) +
facet_grid(L1~TmT1, space = "free_x", scales="free_x") +
theme(axis.text.x=element_text(angle=75, hjust=1, vjust=1),
text=element_text(size=10)),
nrow=1, widths=c(1,3))
plotsF$`1.1.1.1 1+TmT1*Rearing`$MLE +
facet_wrap(vars(beta), scales="free_y") +
theme(text = element_text(size=12))
## Load quietly
load("../output/poultry_metaanalysis_vignette_plots.RD")
plots0$`1.2.3.4 1+Age_weeks`$MLE +
theme(text = element_text(size=12))
plotsM$`1.2.3.3 1+Age_weeks*Species`$Age_weeks$State +
facet_grid(L1~Species, scales="free") +
theme(text=element_text(size=8))
plots0$`1.2.3.4 1+Age_weeks`$Age_weeks$State +
facet_grid(L1~., scales="free") +
theme(text=element_text(size=8))
egg::ggarrange(
plots0$`1.2.3.4 1+Age_weeks`$Age_weeks$Site +
geom_point(size=3) +
theme(legend.position = "bottom", text=element_text(size=8)),
plotsM$`1.2.3.4 1+Age_weeks`$Age_weeks$Age_weeks +
labs(title=NULL) + facet_grid(Sites~.),
nrow=1)
egg::ggarrange(
plots0$`1.2.3.4 1+Age_weeks`$Age_weeks$Site +
geom_point(size=3) +
theme(legend.position = "bottom", text=element_text(size=8)),
plots0$`1.2.3.4 1+Age_weeks`$Age_weeks$Age_weeks +
labs(title=NULL) + facet_grid(Sites~.),
nrow=1)
egg::ggarrange(plotsM$`1.1.1.1 Flock`$MLE +
theme(strip.text.y.right = element_text(angle=-90, hjust=0.5),
text=element_text(size=10)),
plotsM$`1.1.1.1 Flock`$Flock$Site + labs(title=NULL) + facet_grid(variable~L1) +
theme(axis.text.x=element_text(angle=75, hjust=1, vjust=1),
text=element_text(size=10)),
plotsM$`1.1.1.1 Flock`$Flock$State + labs(title=NULL, subtitle=NULL) +
theme(axis.text.x=element_text(angle=75, hjust=1, vjust=1),
text=element_text(size=10)),
nrow=1, widths=c(1,3,3))
## Load quietly
load("../output/poultry_metaanalysis_vignette1_plots.RD")
egg::ggarrange(plotsM$`1.1.1.1 Flock`$MLE +
theme(strip.text.y.right = element_text(angle=-90, hjust=0.5),
text=element_text(size=10)),
plotsM$`1.1.1.1 Flock`$Flock$Site + labs(title=NULL) + facet_grid(variable~L1) +
theme(axis.text.x=element_text(angle=75, hjust=1, vjust=1),
text=element_text(size=10)),
plotsM$`1.1.1.1 Flock`$Flock$State + labs(title=NULL, subtitle=NULL) +
theme(axis.text.x=element_text(angle=75, hjust=1, vjust=1),
text=element_text(size=10)),
nrow=1, widths=c(1,3,3))
egg::ggarrange(plotsM$`1.1.1.1 Flock`$MLE +
theme(strip.text.y.right = element_text(angle=-90, hjust=0.5),
text=element_text(size=10)),
plotsM$`1.1.1.1 Flock`$Flock$Site + labs(title=NULL) + facet_grid(variable~L1) +
theme(axis.text.x=element_text(angle=75, hjust=1, vjust=1),
text=element_text(size=10)),
plotsM$`1.1.1.1 Flock`$Flock$State + labs(title=NULL, subtitle=NULL) +
theme(axis.text.x=element_text(angle=75, hjust=1, vjust=1),
text=element_text(size=10)),
nrow=1, widths=c(1,3,3))
gridExtra::grid.arrange(plotsM$`1.1.2.2 Flock`$MLE +
theme(strip.text.y.right = element_text(angle=-90, hjust=0.5),
text=element_text(size=10)),
plotsM$`1.1.2.2 Flock`$Flock$Site +
facet_grid(.~L1) + labs(title=NULL, subtitle=NULL) +
theme(axis.text.x=element_blank(), axis.title.x = element_blank(),
text=element_text(size=10),
legend.key.size = unit(4,"mm"),
legend.key.spacing = unit(1,"mm"),
legend.text.position = "bottom",
legend.text=element_text(size=6),
legend.title.position = "bottom",
legend.title = element_text(hjust=0.5),
legend.position = "bottom") +
guides(fill=guide_legend(nrow=1)),
plotsM$`1.1.2.2 Flock`$Flock$State +
labs(title=NULL) + facet_grid(variable~L1) +
theme(text=element_text(size=10),
axis.text.x = element_text(angle=75, hjust=1, vjust=1)),
layout_matrix=matrix(c(1,1,2,2,2,1,1,3,3,3), nrow=2, ncol=5, byrow=T))
egg::ggarrange(plotsM$`1.1.2.3 Flock`$MLE +
theme(strip.text.y.right = element_text(angle=-90, hjust=0.5),
text=element_text(size=10)),
plotsM$`1.1.2.3 Flock`$Flock$Site +
labs(title=NULL) + facet_grid(variable~L1) +
theme(axis.text.x=element_text(angle=75, hjust=1, vjust=1),
text=element_text(size=10)),
plotsM$`1.1.2.3 Flock`$Flock$State +
labs(title=NULL, subtitle=NULL) +
theme(axis.text.x=element_text(angle=75, hjust=1, vjust=1),
text=element_text(size=10)),
nrow=1)
egg::ggarrange(plotsM$`1.2.3.3 Flock`$MLE +
theme(strip.text.y.right = element_text(angle=-90, hjust=0.5),
text=element_text(size=10)),
plotsM$`1.2.3.3 Flock`$Flock$Site +
labs(title=NULL) + facet_grid(variable~L1) +
theme(axis.text.x=element_text(angle=75, hjust=1, vjust=1),
text=element_text(size=10)),
plotsM$`1.2.3.3 Flock`$Flock$State +
labs(title=NULL, subtitle=NULL) +
theme(axis.text.x=element_text(angle=75, hjust=1, vjust=1),
text=element_text(size=10)),
nrow=1)
gridExtra::grid.arrange(plotsM$`1.1.2.2 Flock`$MLE +
theme(strip.text.y.right = element_text(angle=-90, hjust=0.5),
text=element_text(size=10)),
plotsM$`1.1.2.2 Flock`$Flock$State +
facet_grid(.~L1) + labs(title=NULL, subtitle=NULL) +
theme(axis.text.x=element_blank(), axis.title.x = element_blank(),
text=element_text(size=10),
legend.key.size = unit(4,"mm"),
legend.key.spacing = unit(1,"mm"),
legend.text.position = "bottom",
legend.text=element_text(size=6),
legend.title.position = "bottom",
legend.title = element_text(hjust=0.5),
legend.position = "bottom") +
guides(fill=guide_legend(nrow=1)),
plotsM$`1.1.2.2 Flock`$Flock$Site +
labs(title=NULL) + facet_grid(variable~L1) +
theme(text=element_text(size=10),
axis.text.x = element_text(angle=75, hjust=1, vjust=1)),
layout_matrix=matrix(c(1,1,2,2,2,1,1,3,3,3), nrow=2, ncol=5, byrow=T))
## Load quietly
load("../output/poultry_metaanalysis_vignette2_plots.RD")
